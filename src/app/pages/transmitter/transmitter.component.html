<div class="tx-page">
		<form [formGroup]="form" (ngSubmit)="generate()" class="form-grid">
			<ng-container formArrayName="signals">
				<div *ngFor="let sg of signalsForm.controls; let i = index" [formGroupName]="i" class="signal-row">
					<label>
						Tipo
						<select formControlName="type">
							<option *ngFor="let type of signalTypes" [value]="type">{{ type }}</option>
						</select>
					</label>

					<label>
						Amplitude
						<input type="number" step="any" formControlName="amplitude" />
					</label>

					<label>
						f (Hz)
						<input type="number" step="any" formControlName="frequency" />
					</label>

					<label>
						Fase (rad)
						<input type="number" step="any" formControlName="phase" />
					</label>

					<button type="button" (click)="removeSignal(i)" [disabled]="signalsForm.length === 1">Remover</button>
				</div>
			</ng-container>

			<div class="row-controls">
				<button type="button" (click)="addSignal()">Adicionar sinal</button>
			</div>

			<label>
				Duração (ms)
				<input type="number" step="any" formControlName="duration" />
			</label>

			<label>
				Freq. de Amostragem (Hz)
				<input type="number" step="any" formControlName="samplingFrequency" />
			</label>

			<button type="submit">Gerar</button>
		</form>

	<div style="font-size: .9rem; margin-top: .25rem;">
			<span *ngIf="nyquistViolated" style="color:#b91c1c;">
				Atenção: fs ({{ fs | number:'1.0-2' }}) < 2×fmax ({{ (maxFrequency*2) | number:'1.0-2' }}) — pode ocorrer aliasing.
			</span>
		<div *ngIf="fs && form.get('duration')?.value">Amostras previstas: <b>{{ expectedSamples }}</b></div>
	</div>

	<div class="chart-wrap">
		<app-signal-chart [data]="output" title="Sinal Gerado"></app-signal-chart>
	</div>
</div>
